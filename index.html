<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>’Ü’•÷Ä’§÷Ä’∏÷Ç’¥’°’µ’´’∂ ’Ä’°÷Ä’©’°’Ø - ‘±÷Ä÷á’°’µ’´’∂ ‘∑’∂’•÷Ä’£’´’°</title>
    
    <style>
        /* ’à’É‘±’é’à’ê’à’í’Ñ’Ü‘µ’ê‘∏ */
        :root {
            --primary-color: #7952b3; /* ’Ñ’∏÷Ç’£ ’Ñ’°’∂’∏÷Ç’∑’°’Ø’°’£’∏÷Ç’µ’∂ */
            --secondary-color: #9c27b0; /* ’Ñ’´’ª’´’∂ ’Ñ’°’∂’∏÷Ç’∑’°’Ø’°’£’∏÷Ç’µ’∂ */
            --accent-color: #ffc107;
            --reward-color: #d63384; /* ’é’°’º ’Ñ’°’∂’∏÷Ç’∑’°’Ø’°’£’∏÷Ç’µ’∂/’Ñ’∏÷Ç’æ */
            --background-light: #f8f9fa;
            --text-dark: #343a3f;
            --shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            --danger-color: #dc3545;
            --deposit-color: #9c27b0; /* ’Ñ’°’∂’∏÷Ç’∑’°’Ø’°’£’∏÷Ç’µ’∂ ’§’•’∫’∏’¶’´’ø’´ ’∞’°’¥’°÷Ä */
            --telegram-color: #0088cc; /* Telegram-’´ ’Ø’°’∫’∏÷Ç’µ’ø’® */ 
            --history-color: #20c997; /* ‘ø’°’∂’°’π ’£’∏÷Ç’µ’∂ ’∫’°’ø’¥’∏÷Ç’©’µ’°’∂ ’∞’°’¥’°÷Ä */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-light);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container {
            background-color: #ffffff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 500px; 
        }
        
        #investments-section, #account-section, #referral-section, #transactions-history-section {
            max-width: 1000px;
        }

        h2 { text-align: center; color: var(--primary-color); margin-bottom: 30px; font-weight: 600; }
        h2.section-title { text-align: left; border-bottom: 2px solid #e9ecef; padding-bottom: 10px; margin-bottom: 20px; }

        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; }
        .form-group input, .form-group select { width: 95%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; font-size: 16px; }

        /* ‘≤’à‘º’à’ê ‘ø’à’É‘±‘ø’Ü‘µ’ê‘ª ’à’É‘±’é’à’ê’à’í’Ñ‘∏ ’Ñ‘±’Ü’à’í’á‘±‘ø‘±‘≥’à’í’Ö’Ü */
        button { 
            width: 100%; 
            padding: 14px; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            font-size: 17px; 
            cursor: pointer; 
            margin-top: 15px; 
            font-weight: 600; 
            transition: background-color 0.3s ease; 
            background-color: var(--secondary-color); /* ’Ñ’´’ª’´’∂ ’Ñ’°’∂’∏÷Ç’∑’°’Ø’°’£’∏÷Ç’µ’∂ */
        }
        
        /* ’Ä’´’¥’∂’°’Ø’°’∂ ’Ø’∏’≥’°’Ø’∂’•÷Ä’® */
        .dashboard-actions button,
        #register-section button, 
        .investment-card button, 
        #deposit-button,
        #redeem-button { 
            background-color: var(--secondary-color); 
        }
        
        /* ’Ä’°’ø’∏÷Ç’Ø ’Ø’∏’≥’°’Ø’∂’•÷Ä’´ ’•÷Ä’°’∂’£’∂’•÷Ä */
        #withdraw-button { 
            background-color: var(--danger-color); /* ‘ø’°÷Ä’¥’´÷Ä’® ’©’∏’≤’∂’∏÷Ç’¥ ’•’∂÷Ñ ’¶’£’∏÷Ç’∑’°÷Å’¥’°’∂ ’∞’°’¥’°÷Ä */
        } 
        
        /* ’ï÷Ä’°’Ø’°’∂ ‘≤’∏’∂’∏÷Ç’Ω’´ ‘ø’∏’≥’°’Ø’® */
        #daily-bonus-button {
            background-color: var(--reward-color); /* ’é’°’º ’Ñ’°’∂’∏÷Ç’∑’°’Ø’°’£’∏÷Ç’µ’∂ */
            padding: 18px;
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        /* ‘±’Ü’ã‘±’è’é‘±‘æ ‘ø’à’É‘±‘ø‘ª ’à’É‘∏ */
        #daily-bonus-button:disabled,
        .dashboard-actions button:disabled {
            background-color: #90A4AE !important; /* ’Ñ’∏’≠÷Ä’°’£’∏÷Ç’µ’∂ */
            cursor: not-allowed;
            opacity: 0.8;
        }
        
        /* ’å’•÷Ü’•÷Ä’°’¨’´ ’ä’°’ø’≥’•’∂’•’¨ ’Ø’∏’≥’°’Ø’® */
        #referral-section button {
            background-color: var(--primary-color);
        }

        /* ‘ø‘±’ä‘ª ‘ø’à’É‘±‘ø‘ª ’à’É‘±’é’à’ê’à’í’Ñ‘∏ */
        #contact-manager-button {
            background-color: var(--telegram-color); /* Telegram-’´ ’Ø’°’∫’∏÷Ç’µ’ø’® */
            grid-column: span 2; /* ‘ø’∏’≥’°’Ø’® ’±’£’æ’∏÷Ç’¥ ’ß ’•÷Ä’Ø’∏÷Ç ’Ω’µ’∏÷Ç’∂’°’Ø’´ ’æ÷Ä’° */
            margin-top: 25px;
            padding: 15px;
        }
        
        /* ‘≥’à’ê‘æ‘±’ê’î’Ü‘µ’ê‘ª ’ä‘±’è’Ñ’à’í‘π’Ö‘±’Ü ‘ø’à’É‘±‘ø */
        #history-button {
            background-color: var(--history-color);
            grid-column: span 2; 
            margin-top: 5px;
            padding: 12px;
            font-size: 15px;
        }


        .dashboard-info { background-color: #e9ecef; padding: 20px; border-radius: 8px; margin-bottom: 20px; text-align: center; }
        .investment-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .investment-card { background-color: #ffffff; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); }
        .deposit-withdraw-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }

        /* ’ì’∏÷É’∏’≠’æ’°’Æ’ù ’°’æ’•’¨’°÷Å’∂’•’¨’∏’æ 3-÷Ä’§ ’ø’∏’≤’® ’Ø’°’∫’´ ’Ø’∏’≥’°’Ø’´ ’∞’°’¥’°÷Ä */
        .dashboard-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 25px; }
        .dashboard-actions button { margin-top: 0; padding: 12px; font-size: 15px; }
        
        /* ‘≥’à’ê‘æ‘±’ê’î’Ü‘µ’ê‘ª ’ë’à’í’ë‘±‘ø‘ª ’à’É‘∏ */
        #dailyTransactionsList {
            list-style: none;
            padding: 0;
            border: 1px solid #dee2e6;
            border-radius: 6px;
        }
        .transaction-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .transaction-item:last-child {
            border-bottom: none;
        }
        .tx-type {
            font-weight: bold;
            color: var(--primary-color);
        }
        .tx-amount.positive {
            color: #28a745;
            font-weight: bold;
        }
        .tx-amount.negative {
            color: var(--danger-color);
            font-weight: bold;
        }
        
        .section { display: none; }
        
        .switch-link a { cursor: pointer; color: var(--primary-color); text-decoration: underline; }
        
    </style>
</head>
<body>

    <div id="main-container" class="container">
        
        <div id="register-section" class="section">
             <h2>‘≥÷Ä’°’∂÷Å’∏÷Ç’¥</h2>
            <form id="registrationForm">
                <div class="form-group"><label for="reg-username">’ï’£’ø’°’ø’´÷Ä’∏’ª ‘±’∂’∏÷Ç’∂</label><input type="text" id="reg-username" required></div>
                <div class="form-group"><label for="reg-email">‘∑’¨. ’ì’∏’Ω’ø</label><input type="email" id="reg-email" required></div>
                <div class="form-group"><label for="reg-password">‘≥’°’≤’ø’∂’°’¢’°’º</label><input type="password" id="reg-password" required></div>
                <div class="form-group"><label for="reg-confirmPassword">‘ø÷Ä’Ø’∂’•’¨ ‘≥’°’≤’ø’∂’°’¢’°’º’®</label><input type="password" id="reg-confirmPassword" required></div>
                <div class="form-group"><label for="reg-referralCode">’å’•÷Ü’•÷Ä’°’¨ ‘ø’∏’§ (‘∏’Ω’ø ’ë’°’∂’Ø’∏÷Ç’©’µ’°’∂)</label><input type="text" id="reg-referralCode"></div>
                <button type="submit">‘≥÷Ä’°’∂÷Å’æ’•’¨</button>
            </form>
            <div class="switch-link">‘±÷Ä’§’•’∂ ’∏÷Ç’∂’•÷Å’•’û÷Ñ ’∞’°’∑’´’æ: <a onclick="showSection('login')">’Ñ’∏÷Ç’ø÷Ñ ‘≥’∏÷Ä’Æ’•’¨</a></div>
        </div>

        <div id="login-section" class="section">
            <h2>’Ñ’∏÷Ç’ø÷Ñ</h2>
            <form id="loginForm">
                <div class="form-group"><label for="log-email">‘∑’¨. ’ì’∏’Ω’ø</label><input type="email" id="log-email" required></div>
                <div class="form-group"><label for="log-password">‘≥’°’≤’ø’∂’°’¢’°’º</label><input type="password" id="log-password" required></div>
                <button type="submit">’Ñ’∏÷Ç’ø÷Ñ ‘≥’∏÷Ä’Æ’•’¨</button>
            </form>
            <div class="switch-link">‘¥’•’º ’∞’°’∑’´’æ ’π’∏÷Ç’∂’•’û÷Ñ: <a onclick="showSection('register')">‘≥÷Ä’°’∂÷Å’æ’•’¨</a></div>
        </div>

        <div id="dashboard-section" class="section">
             <div class="dashboard-header"><h2>‘≥’¨’≠’°’æ’∏÷Ä</h2><p style="color: var(--primary-color);">‘±÷Ä÷á’°’µ’´’∂ ‘∑’∂’•÷Ä’£’´’°’µ’´ ’Ü’•÷Ä’§÷Ä’∏÷Ç’¥’∂’•÷Ä’´ ’Ä’°÷Ä’©’°’Ø</p></div>

            <div class="dashboard-info">
                <h3>‘∏’∂’©’°÷Å’´’Ø ’Ñ’∂’°÷Å’∏÷Ä’§</h3>
                <p id="current-balance">$ 0.00</p>
                <p id="profit-info" style="font-size: 0.9em; color: var(--secondary-color); margin-top: 10px; display: none;">‚úÖ ’Å’•÷Ä ’•’Ø’°’¥’∏÷Ç’ø’® ’°’æ’•’¨’°÷Å’æ’•’¨ ’ß:</p>
            </div>
            
            <button id="daily-bonus-button" onclick="getDailyBonus()">
                üéÅ ’ç’ø’°’∂’°’¨ ’ï÷Ä’°’Ø’°’∂ ‘≤’∏’∂’∏÷Ç’Ω’® ($ 0.10)
            </button>
            
            <div class="dashboard-actions">
                <button onclick="showSection('investments');">’Ü’•÷Ä’§÷Ä’∏÷Ç’¥’∂’•÷Ä</button>
                <button onclick="showSection('account');">‘º’´÷Å÷Ñ’°’æ’∏÷Ä’•’¨ / ‘¥’∏÷Ç÷Ä’Ω  ‘≤’•÷Ä’•’¨</button>
                <button onclick="showSection('referral');">’Ä÷Ä’°’æ’´÷Ä’•’¨ ‘∏’∂’Ø’•÷Ä’∂’•÷Ä’´</button>
                <button style="background-color: var(--reward-color);" onclick="showSection('rewards');">üéÅ ’ä’°÷Ä’£÷á’°’ø÷Ä’∏÷Ç’¥’∂’•÷Ä</button>
                
                <button id="history-button" onclick="showDailyTransactions()">
                    üïí ’ï÷Ä’æ’° ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä’®
                </button>
                
                <button id="contact-manager-button" onclick="contactManager()">
                    üìû ‘ø’°’∫ ’Ñ’•’∂’•’ª’•÷Ä’´ ’Ä’•’ø (Telegram: @Solar165)
                </button>
            </div>
            
            <div class="switch-link"><a onclick="logOut();">‘¥’∏÷Ç÷Ä’Ω ‘≥’°’¨</a></div>
        </div>
        
        <div id="transactions-history-section" class="section">
            <h2 class="section-title" style="color: var(--history-color);">üïí ’ï÷Ä’æ’° ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä’´ ’ä’°’ø’¥’∏÷Ç’©’µ’∏÷Ç’∂</h2>
            <p style="margin-bottom: 25px; color: #6c757d;">
                ’ë’∏÷Ç÷Å’°’§÷Ä’æ’∏÷Ç’¥ ’•’∂ ’¥’´’°’µ’∂ ’®’∂’©’°÷Å’´’Ø ÷Ö÷Ä’æ’° (‘±’µ’Ω÷Ö÷Ä) ’Ø’°’ø’°÷Ä’æ’°’Æ ’£’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä’®÷â
            </p>

            <ul id="dailyTransactionsList">
                </ul>

            <div class="switch-link" style="margin-top: 30px;"><a onclick="showSection('dashboard')">‚Üê ’é’•÷Ä’°’§’°’º’∂’°’¨ ‘≥’¨’≠’°’æ’∏÷Ä ‘∑’ª</a></div>
        </div>

        <div id="rewards-section" class="section">
            <h2 class="section-title" style="color: var(--reward-color);">üéÅ ’ä’°÷Ä’£÷á’°’ø÷Ä’∏÷Ç’¥’∂’•÷Ä ÷á ’ä÷Ä’∏’¥’∏ ‘ø’∏’§’•÷Ä</h2>
            <p style="margin-bottom: 30px; color: #6c757d;">’Ñ’∏÷Ç’ø÷Ñ’°’£÷Ä’•÷Ñ ’Å’•÷Ä ’∫÷Ä’∏’¥’∏ ’Ø’∏’§’®’ù ’∞’°’æ’•’¨’µ’°’¨ ’¢’∏’∂’∏÷Ç’Ω ’Ω’ø’°’∂’°’¨’∏÷Ç ’∞’°’¥’°÷Ä÷â</p>

            <div id="rewards-info" class="dashboard-info">
                <h3 style="color: var(--reward-color);">’Ñ’∂’°÷Å’∏÷Ä’§: $<span id="current-balance-rewards">0.00</span></h3>
            </div>
            
            <form id="promoCodeForm">
                <div class="form-group">
                    <label for="promo-code-input">’ä÷Ä’∏’¥’∏ ‘ø’∏’§’®</label>
                    <input type="text" id="promo-code-input" placeholder="’ï÷Ä’´’∂’°’Ø’ù SOLAR_BONUS123" required>
                </div>
                <button type="submit" id="redeem-button">’Ñ’∏÷Ç’ø÷Ñ’°’£÷Ä’•’¨ ‘ø’∏’§’®</button>
            </form>

            <div class="switch-link" style="margin-top: 30px;"><a onclick="showSection('dashboard')">‚Üê ’é’•÷Ä’°’§’°’º’∂’°’¨ ‘≥’¨’≠’°’æ’∏÷Ä ‘∑’ª</a></div>
        </div>

        <div id="investments-section" class="section">
            <h2 class="section-title">’Ü’•÷Ä’§÷Ä’∏÷Ç’¥’°’µ’´’∂ ‘±’º’°’ª’°÷Ä’Ø’∂’•÷Ä</h2>
            <p style="margin-bottom: 25px; color: #6c757d;">‘∏’∂’ø÷Ä’•÷Ñ ’Å’•÷Ä ’°÷Ä÷á’°’µ’´’∂ ’Ø’°’µ’°’∂’´ ÷É’°’©’•’©’® ÷á ’Ω’Ø’Ω’•÷Ñ ’•’Ø’°’¥’∏÷Ç’ø ’Ω’ø’°’∂’°’¨÷â **’Ñ’∂’°÷Å’∏÷Ä’§: $<span id="current-balance-invest">0.00</span>**</p>

            <div class="investment-grid">
                <div class="investment-card"><div class="card-title">‚òÄÔ∏è Light Start</div><div class="card-detail">‘±÷Ä’™’•÷Ñ’®: <strong>$20</strong></div><div class="card-detail">’ï÷Ä’°’Ø’°’∂ ‘µ’Ø’°’¥’∏÷Ç’ø: <strong>$1.10</strong></div><div class="card-detail">‘∫’°’¥’Ø’•’ø: <strong>60 ÷Ö÷Ä</strong></div><button onclick="handleInvestment(20, 1.10);">’Ü’•÷Ä’§÷Ä’•’¨</button></div>
                <div class="investment-card"><div class="card-title">‚ö° Quick Solar</div><div class="card-detail">‘±÷Ä’™’•÷Ñ’®: <strong>$50</strong></div><div class="card-detail">’ï÷Ä’°’Ø’°’∂ ‘µ’Ø’°’¥’∏÷Ç’ø: <strong>$2.80</strong></div><div class="card-detail">‘∫’°’¥’Ø’•’ø: <strong>60 ÷Ö÷Ä</strong></div><button onclick="handleInvestment(50, 2.80);">’Ü’•÷Ä’§÷Ä’•’¨</button></div>
                <div class="investment-card"><div class="card-title">üå± Eco Power</div><div class="card-detail">‘±÷Ä’™’•÷Ñ’®: <strong>$100</strong></div><div class="card-detail">’ï÷Ä’°’Ø’°’∂ ‘µ’Ø’°’¥’∏÷Ç’ø: <strong>$5.80</strong></div><div class="card-detail">‘∫’°’¥’Ø’•’ø: <strong>65 ÷Ö÷Ä</strong></div><button onclick="handleInvestment(100, 5.80);">’Ü’•÷Ä’§÷Ä’•’¨</button></div>
                <div class="investment-card"><div class="card-title">üåÖ Sun Rise</div><div class="card-detail">‘±÷Ä’™’•÷Ñ’®: <strong>$150</strong></div><div class="card-detail">’ï÷Ä’°’Ø’°’∂ ‘µ’Ø’°’¥’∏÷Ç’ø: <strong>$8.80</strong></div><div class="card-detail">‘∫’°’¥’Ø’•’ø: <strong>65 ÷Ö÷Ä</strong></div><button onclick="handleInvestment(150, 8.80);">’Ü’•÷Ä’§÷Ä’•’¨</button></div>
                <div class="investment-card"><div class="card-title">üîã Green Energy</div><div class="card-detail">‘±÷Ä’™’•÷Ñ’®: <strong>$200</strong></div><div class="card-detail">’ï÷Ä’°’Ø’°’∂ ‘µ’Ø’°’¥’∏÷Ç’ø: <strong>$12.00</strong></div><div class="card-detail">‘∫’°’¥’Ø’•’ø: <strong>70 ÷Ö÷Ä</strong></div><button onclick="handleInvestment(200, 12.00);">’Ü’•÷Ä’§÷Ä’•’¨</button></div>
                <div class="investment-card"><div class="card-title">üí° Peak Flow</div><div class="card-detail">‘±÷Ä’™’•÷Ñ’®: <strong>$300</strong></div><div class="card-detail">’ï÷Ä’°’Ø’°’∂ ‘µ’Ø’°’¥’∏÷Ç’ø: <strong>$18.50</strong></div><div class="card-detail">‘∫’°’¥’Ø’•’ø: <strong>70 ÷Ö÷Ä</strong></div><button onclick="handleInvestment(300, 18.50);">’Ü’•÷Ä’§÷Ä’•’¨</button></div>
                <div class="investment-card"><div class="card-title">‚≠ê Mega Watt</div><div class="card-detail">‘±÷Ä’™’•÷Ñ’®: <strong>$400</strong></div><div class="card-detail">’ï÷Ä’°’Ø’°’∂ ‘µ’Ø’°’¥’∏÷Ç’ø: <strong>$25.00</strong></div><div class="card-detail">‘∫’°’¥’Ø’•’ø: <strong>75 ÷Ö÷Ä</strong></div><button onclick="handleInvestment(400, 25.00);">’Ü’•÷Ä’§÷Ä’•’¨</button></div>
                <div class="investment-card" style="border-color: var(--primary-color);"><div class="card-title" style="color: var(--primary-color);">‚ö° Solar Pro</div><div class="card-detail">‘±÷Ä’™’•÷Ñ’®: <strong>$500</strong></div><div class="card-detail">’ï÷Ä’°’Ø’°’∂ ‘µ’Ø’°’¥’∏÷Ç’ø: <strong>$30.00</strong></div><div class="card-detail">‘∫’°’¥’Ø’•’ø: <strong>75 ÷Ö÷Ä</strong></div><button onclick="handleInvestment(500, 30.00);">’Ü’•÷Ä’§÷Ä’•’¨</button></div>
                <div class="investment-card" style="border-color: #d63384;"><div class="card-title" style="color: #d63384;">üëë Power Master</div><div class="card-detail">‘±÷Ä’™’•÷Ñ’®: <strong>$2000</strong></div><div class="card-detail">’ï÷Ä’°’Ø’°’∂ ‘µ’Ø’°’¥’∏÷Ç’ø: <strong>$130.00</strong></div><div class="card-detail">‘∫’°’¥’Ø’•’ø: <strong>90 ÷Ö÷Ä</strong></div><button onclick="handleInvestment(2000, 130.00);">’Ü’•÷Ä’§÷Ä’•’¨</button></div>
            </div>
            
            <h3 style="margin-top: 40px; border-bottom: 1px solid #dee2e6; padding-bottom: 10px;">‘ª’¥ ‘±’Ø’ø’´’æ ’Ü’•÷Ä’§÷Ä’∏÷Ç’¥’∂’•÷Ä’®</h3>
            <ul id="activeInvestmentsList" style="list-style-type: none; padding: 0;">
                <li style="color: #6c757d;">‘¥’∏÷Ç÷Ñ ’§’•’º ’°’Ø’ø’´’æ ’∂’•÷Ä’§÷Ä’∏÷Ç’¥ ’π’∏÷Ç’∂’•÷Ñ:</li>
            </ul>

            <div class="switch-link"><a onclick="showSection('dashboard')">‚Üê ’é’•÷Ä’°’§’°’º’∂’°’¨ ‘≥’¨’≠’°’æ’∏÷Ä ‘∑’ª</a></div>
        </div>

        <div id="referral-section" class="section">
            <h2 class="section-title">’Ä÷Ä’°’æ’´÷Ä’•÷Ñ ‘∏’∂’Ø’•÷Ä’∂’•÷Ä</h2>
            <p style="margin-bottom: 30px; color: #6c757d;">’ç’ø’°÷Å’•÷Ñ ’¢’∏’∂’∏÷Ç’Ω ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’∂’∏÷Ä ’∂’•÷Ä’§÷Ä’∏÷Ç’¥ ’Ø’°’ø’°÷Ä’°’Æ ÷Ö’£’ø’°’ø’´÷Ä’∏’ª ÷Ö÷Ä’°’Ø’°’∂ ’•’Ø’°’¥’ø’´ **10%-’´ ’π’°÷É’∏’æ**÷â</p>

            <div class="dashboard-info" style="background-color: #f3e5f5; border: 1px solid var(--primary-color);">
                <h3 style="color: var(--primary-color);">’Å’•÷Ä ’Ä÷Ä’°’æ’•÷Ä’´ ‘±’∂’±’∂’°’Ø’°’∂ ‘ø’∏’§’®</h3>
                
                <div style="display: flex; justify-content: space-between; align-items: center; border: 2px dashed var(--secondary-color); padding: 10px; border-radius: 6px; margin-top: 15px;">
                    <span id="referralCodeDisplay" style="font-size: 1.4em; font-weight: 700; color: var(--primary-color);">[‘ø’∏’§’®]</span>
                    <button 
                        style="width: 120px; padding: 8px; font-size: 14px; background-color: var(--primary-color); margin: 0;"
                        onclick="copyReferralCode()">
                        ’ä’°’ø’≥’•’∂’•’¨
                    </button>
                </div>
                <small style="display: block; margin-top: 10px;">‘±’µ’Ω ’Ø’∏’§’® ’∫’•’ø÷Ñ ’ß ’¥’∏÷Ç’ø÷Ñ’°’£÷Ä’æ’´ ’∂’∏÷Ä ÷Ö’£’ø’°’ø’´÷Ä’∏’ª ’Ø’∏’≤’¥’´÷Å ’£÷Ä’°’∂÷Å’¥’°’∂ ’™’°’¥’°’∂’°’Ø÷â</small>
            </div>

            <h3 style="margin-top: 40px; border-bottom: 1px solid #dee2e6; padding-bottom: 10px;">’Å’•÷Ä ‘π’´’¥’® ÷á ‘≤’∏’∂’∏÷Ç’Ω’∂’•÷Ä’®</h3>
            
            <div class="investment-grid" style="grid-template-columns: 1fr 1fr;">
                <div class="investment-card" style="padding: 15px; text-align: center;">
                    <p id="refCount" style="font-size: 1.8em; font-weight: 700; color: var(--secondary-color);">0</p>
                    <small>’Ä÷Ä’°’æ’´÷Ä’æ’°’Æ ‘≥÷Ä’°’∂÷Å’æ’°’Æ’∂’•÷Ä</small>
                </div>
                <div class="investment-card" style="padding: 15px; text-align: center;">
                    <p id="refBonus" style="font-size: 1.8em; font-weight: 700; color: var(--reward-color);">+ $ 0.00</p>
                    <small>‘∏’∂’§’∞’°’∂’∏÷Ç÷Ä ’ç’ø’°÷Å’æ’°’Æ ‘≤’∏’∂’∏÷Ç’Ω (’∂’•÷Ä’°’º’µ’°’¨ 10%-’®)</small>
                </div>
            </div>

            <div class="switch-link"><a onclick="showSection('dashboard')">‚Üê ’é’•÷Ä’°’§’°’º’∂’°’¨ ‘≥’¨’≠’°’æ’∏÷Ä ‘∑’ª</a></div>
        </div>


        <div id="account-section" class="section">
            <h2 class="section-title">’Ä’°’∑’æ’´ ‘ø’°’º’°’æ’°÷Ä’∏÷Ç’¥</h2>
            <p style="margin-bottom: 30px; color: #6c757d;">‘≥’∏÷Ç’¥’°÷Ä’∂’•÷Ä’´ ’¨’´÷Å÷Ñ’°’æ’∏÷Ä’∏÷Ç’¥ ÷á ’§’∏÷Ç÷Ä’Ω’¢’•÷Ä’∏÷Ç’¥ ’Ø÷Ä’´’∫’ø’∏’°÷Ä’™’∏÷Ç’µ’©’´ ’¥’´’ª’∏÷Å’∏’æ÷â **’Ñ’∂’°÷Å’∏÷Ä’§: $<span id="current-balance-account">0.00</span>**</p>

            <div class="deposit-withdraw-grid">
                
                <div>
                    <h3 style="color: var(--deposit-color);">üí∞ ‘º’´÷Å÷Ñ’°’æ’∏÷Ä’∏÷Ç’¥</h3>
                    <form id="depositForm">
                        <div class="form-group"><label for="deposit-amount">‘º’´÷Å÷Ñ’°’æ’∏÷Ä’¥’°’∂ ’â’°÷É’® ($)</label><input type="number" id="deposit-amount" placeholder="’Ü’æ’°’¶’°’£’∏÷Ç’µ’∂’® $20" min="20" required></div>
                        <div class="form-group">
                            <label for="crypto-network">‘∏’∂’ø÷Ä’•÷Ñ ‘ø÷Ä’´’∫’ø’∏ ‘±÷Ä’™’∏÷Ç’µ’©’®</label>
                            <select id="crypto-network" required>
                                <option value="USDT_TRC20">USDT (TRC20)</option>
                                <option value="USDT_ERC20">USDT (ERC20)</option>
                                <option value="BTC">Bitcoin (BTC)</option>
                                <option value="ETH_ERC20">Ethereum (ERC20)</option>
                                <option value="LTC">Litecoin (LTC)</option>
                                <option value="DOGE">Dogecoin (DOGE)</option>
                                <option value="BNB_BSC">BNB (BSC/BEP20)</option>
                                <option value="ADA">Cardano (ADA)</option>
                                <option value="XRP">Ripple (XRP)</option>
                                <option value="SOL">Solana (SOL)</option>
                            </select>
                        </div>
                        <button type="submit" id="deposit-button">‘º’´÷Å÷Ñ’°’æ’∏÷Ä’•’¨</button>
                    </form>
                </div>

                <div>
                    <h3 style="color: var(--danger-color);">üí∏ ‘¥’∏÷Ç÷Ä’Ω’¢’•÷Ä’∏÷Ç’¥</h3>
                    <form id="withdrawForm">
                        <div class="form-group"><label for="withdraw-amount">‘¥’∏÷Ç÷Ä’Ω’¢’•÷Ä’æ’∏’≤ ‘≥’∏÷Ç’¥’°÷Ä ($)</label><input type="number" id="withdraw-amount" placeholder="’Ü’æ’°’¶’°’£’∏÷Ç’µ’∂’® $15" min="15" required></div>
                        <div class="form-group"><label for="withdraw-address">’Å’•÷Ä ‘ø÷Ä’´’∫’ø’∏ ’Ä’°’Ω÷Å’•’∂</label><input type="text" id="withdraw-address" placeholder="’ï÷Ä’´’∂’°’Ø’ù TJKs9S...4jK" required></div>
                        <div class="form-group"><label for="withdraw-password">‘≥’°’≤’ø’∂’°’¢’°’º (‘±’∂’æ’ø’°’∂’£’∏÷Ç’©’µ’°’∂ ’∞’°’¥’°÷Ä)</label><input type="password" id="withdraw-password" required></div>
                        <button type="submit" id="withdraw-button">‘¥’∏÷Ç÷Ä’Ω  ‘≤’•÷Ä’•’¨</button>
                    </form>
                </div>
            </div>

            <div id="admin-section-controls">
                <h3 style="margin-top: 40px; border-bottom: 1px solid #dee2e6; padding-bottom: 10px;">‘±‘¥’Ñ‘ª’Ü‘ª’ç’è’ê‘±’è’à’ê‘ª ‘ø‘±’å‘±’é‘±’ê’à’í’Ñ (’Ü’°’≠’°’ø’´’∫)</h3>
                
                <h4 style="margin-top: 25px; color: var(--primary-color);">‘≥÷Ä’°’∂÷Å’æ’°’Æ ’ï’£’ø’°’ø’•÷Ä’•÷Ä’´ ’ë’∏÷Ç÷Å’°’Ø’®</h4>
                <div id="admin-user-list">
                    <p style="color: #6c757d;">‘≤’•’º’∂’æ’∏÷Ç’¥ ’•’∂ ÷Ö’£’ø’°’ø’•÷Ä’•÷Ä’´ ’ø’æ’µ’°’¨’∂’•÷Ä’®...</p>
                </div>
                
                <h4 style="margin-top: 25px; color: var(--danger-color);">’ç’∫’°’Ω’æ’∏’≤ ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä</h4>
                <p style="color: var(--danger-color); font-size: 0.9em;">‘±’µ’Ω ’∞’°’ø’æ’°’Æ’® ’∂’¥’°’∂’°’Ø’∏÷Ç’¥ ’ß ’Ω’•÷Ä’æ’•÷Ä’´ ’ø’•’≤’•’Ø’°’ø’æ’∏÷Ç’©’µ’∏÷Ç’∂’®:</p>
                <pre id="adminLog" class="admin-log-box">’ç’∫’°’Ω’∏÷Ç’¥ ’ß ’£’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä’´:</pre>
                
                <div id="adminControls" style="display: none;">
                    
                    <div id="admin-inputs" style="margin-top: 10px;">
                        <div class="form-group">
                            <label for="admin-txid">**‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’´ ’Ä’°’Ω’ø’°’ø’¥’°’∂ ID (TXID/Hash)**</label>
                            <input type="text" id="admin-txid" placeholder="’Ñ’∏÷Ç’ø÷Ñ’°’£÷Ä’•’¨ ’∞’°’Ω’ø’°’ø’¥’°’∂ ID-’∂ (÷Ö÷Ä’´’∂’°’Ø’ù 0x1a2b3c...)" style="width: 98%;">
                        </div>
                        <div class="form-group">
                            <label for="admin-password">**‘±’§’¥’´’∂’´ ‘≥’°’≤’ø’∂’°’¢’°’º (‘±’∂’æ’ø’°’∂’£’∏÷Ç’©’µ’°’∂ ’∞’°’¥’°÷Ä)**</label>
                            <input type="password" id="admin-password" placeholder="’Å’•÷Ä ’£’°’≤’ø’∂’°’¢’°’º’®" style="width: 98%;">
                        </div>
                    </div>

                    <div class="confirm-button-grid">
                        <button class="confirm-button" id="confirm-btn" onclick="promptAdminConfirmation(true)" style="background-color: #28a745;">‚úÖ ’Ä’°’Ω’ø’°’ø’•’¨ ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’®</button>
                        <button class="confirm-button" id="reject-btn" onclick="promptAdminConfirmation(false)" style="background-color: var(--danger-color);">‚ùå ’Ñ’•÷Ä’™’•’¨ ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’®</button>
                    </div>
                </div>
            </div>

            <div class="switch-link"><a onclick="showSection('dashboard')">‚Üê ’é’•÷Ä’°’§’°’º’∂’°’¨ ‘≥’¨’≠’°’æ’∏÷Ä ‘∑’ª</a></div>
        </div>
        
        <div id="deposit-details-section" class="section">
            <h2 style="color: var(--deposit-color);">‚úÖ ‘º’´÷Å÷Ñ’°’æ’∏÷Ä’¥’°’∂ ’Ä’°÷Ä÷Å’∏÷Ç’¥’∂ ‘∏’∂’§’∏÷Ç’∂’æ’°’Æ ‘∑</h2>
            
            <div class="dashboard-info" style="background-color: #f7f7f7; text-align: left;">
                <p><strong>‘ø’°÷Ä’£’°’æ’´’≥’°’Ø:</strong> <span id="deposit-status-display" style="color: orange; font-weight: bold;">’ç’∫’°’Ω’∏÷Ç’¥ ’ß ’Å’•÷Ä ’ì’∏’≠’°’∂÷Å’¥’°’∂’®</span></p>
                <p style="margin-top: 10px;">‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ÷É’∏’≠’°’∂÷Å’•’¨ ’∂’∑’æ’°’Æ ’£’∏÷Ç’¥’°÷Ä’® ’Ω’ø’∏÷Ä÷á ’∂’•÷Ä’Ø’°’µ’°÷Å’æ’°’Æ ’∞’°’Ω÷Å’•’´’∂:</p>
            </div>
            
            <h3 style="margin-top: 20px;">’ì’∏’≠’°’∂÷Å’•’¨’∏÷Ç ‘¥’•’ø’°’¨’∂’•÷Ä’®</h3>
            
            <div style="text-align: left; padding: 10px;">
                <p>‘≥’∏÷Ç’¥’°÷Ä’® (’≥’∑’£÷Ä’´’ø): <strong id="deposit-amount-display" style="font-size: 1.2em; color: var(--danger-color);">$0.00</strong></p>
                <p>‘ø÷Ä’´’∫’ø’∏ / ’ë’°’∂÷Å: <strong id="deposit-currency-display">USDT (TRC20)</strong></p>
                
                <p style="margin-top: 15px;">**’ì’∏’≠’°’∂÷Å’¥’°’∂ ’Ä’°’Ω÷Å’•:**</p>
                <div id="deposit-address-display" class="address-box">
                    [’Ä’°’Ω÷Å’•]
                </div>
                <button id="copy-address-button" onclick="copyDepositAddress()">’ä’°’ø’≥’•’∂’•’¨ ’Ä’°’Ω÷Å’•’∂</button>
            </div>

            <button id="transfer-sent-button" onclick="notifyTransferSent()" style="background-color: #28a745; margin-top: 30px;">‚úÖ ’ì’∏’≠’°’∂÷Å’•’¨ ’•’¥</button>

            <p class="warning-text">
                ‘∂‘≥’à’í’á‘±’ë’à’í’Ñ. ’Ä’°’¥’∏’¶’æ’•÷Ñ, ’∏÷Ä ’®’∂’ø÷Ä’•’¨ ’•÷Ñ ’≥’´’∑’ø ’ë’°’∂÷Å’®÷â ’ç’≠’°’¨ ÷Å’°’∂÷Å’∏’æ ÷É’∏’≠’°’∂÷Å’∏÷Ç’¥’® ’Ø’°÷Ä’∏’≤ ’ß ’∞’°’∂’£’•÷Å’∂’•’¨ ’£’∏÷Ç’¥’°÷Ä’´ ’Ø’∏÷Ä’Ω’ø’´÷â
            </p>
            <small style="display: block; margin-top: 15px; color: #6c757d;">
                ‘≥’∏÷Ç’¥’°÷Ä’® ’Å’•÷Ä ’∞’°’∑’æ’´’∂ ’Ø’°’æ’•’¨’°’∂’° ‘±’§’¥’´’∂’´ ’Ø’∏’≤’¥’´÷Å ’£’∏÷Ä’Æ’°÷Ä÷Ñ’´ ’∞’°’Ω’ø’°’ø’∏÷Ç’¥’´÷Å ’∞’•’ø’∏ (’Ω’∏’æ’∏÷Ä’°’¢’°÷Ä 1-20 ÷Ä’∏’∫’•):
            </small>

            <div class="switch-link" style="margin-top: 30px;"><a onclick="showSection('dashboard')">‚Üê ’é’•÷Ä’°’§’°’º’∂’°’¨ ‘≥’¨’≠’°’æ’∏÷Ä ‘∑’ª</a></div>
        </div>


    </div>

    <script>
        // ‘∏’∂’§’∞’°’∂’∏÷Ç÷Ä ÷É’∏÷É’∏’≠’°’Ø’°’∂’∂’•÷Ä
        let userEmail = '';
        let currentBalance = 0.00;
        
        const MS_PER_DAY = 24 * 60 * 60 * 1000; 
        
        const ADMIN_EMAIL = 'admin@solar.com'; 
        const REFERRAL_BONUS_PERCENTAGE = 0.10; // ’å’•÷Ü’•÷Ä’°’¨’´ ’•’Ø’°’¥’ø’´ 10%
        const REGISTRATION_BONUS_AMOUNT = 1.00; 
        const DAILY_BONUS_AMOUNT = 0.10; // ’ï÷Ä’°’Ø’°’∂ ’¢’∏’∂’∏÷Ç’Ω’´ ’π’°÷É’®
        
        let promoCodes = {}; 

        // ’ñ’∏÷Ç’∂’Ø÷Å’´’°’∂’•÷Ä localStorage-’´÷Å ’ä’ê’à’Ñ’à ‘ø’à‘¥‘µ’ê‘∏ ’Ø’°’º’°’æ’°÷Ä’•’¨’∏÷Ç ’∞’°’¥’°÷Ä
        function getPromoCodesDB() {
            const db = localStorage.getItem('promo_codes_db');
            return db ? JSON.parse(db) : {};
        }

        function savePromoCodesDB(db) {
            localStorage.setItem('promo_codes_db', JSON.stringify(db));
        }

        // ‘≥’à’ê‘æ‘±’ê’î‘ª ‘ø‘±’å‘±’é‘±’ê’à’í’Ñ 
        function getPendingTransaction() {
            const pending = localStorage.getItem('pendingTransaction');
            return pending ? JSON.parse(pending) : null;
        }

        function savePendingTransaction(transaction) {
            if (transaction) {
                localStorage.setItem('pendingTransaction', JSON.stringify(transaction));
            } else {
                localStorage.removeItem('pendingTransaction');
            }
        }
        
        // ‘≤’•’º’∂’•’¨ pendingTransaction-’® localStorage-’´÷Å ’Ω’Ø’¶’¢’∏÷Ç’¥
        let pendingTransaction = getPendingTransaction(); 
        
        // ‚úÖ ‘≥’à’ê‘æ‘±’ê’î’Ü‘µ’ê‘ª ’ä‘±’è’Ñ’à’í‘π’Ö‘±’Ü ’ñ’à’í’Ü‘ø’ë‘ª‘±’Ü‘µ’ê‘∏
        
        function getTransactionLog() {
            const log = localStorage.getItem('transactionLog');
            return log ? JSON.parse(log) : [];
        }

        function saveTransactionLog(log) {
            localStorage.setItem('transactionLog', JSON.stringify(log));
        }
        
        // ’Ü’∏÷Ä ’£’∏÷Ä’Æ’°÷Ä÷Ñ ’°’æ’•’¨’°÷Å’∂’•’¨’∏÷Ç ÷Ü’∏÷Ç’∂’Ø÷Å’´’°
        function addTransactionToLog(transactionDetails) {
            const log = getTransactionLog();
            log.push(transactionDetails);
            saveTransactionLog(log);
        }

        // ’ï÷Ä’æ’° ’£’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä’® ÷Ü’´’¨’ø÷Ä’•’¨’∏÷Ç ÷á ÷Å’∏÷Ç÷Å’°’§÷Ä’•’¨’∏÷Ç ÷Ü’∏÷Ç’∂’Ø÷Å’´’°
        function showDailyTransactions() {
            const log = getTransactionLog();
            const today = new Date().toISOString().split('T')[0];
            
            // ’ñ’´’¨’ø÷Ä’•’¨ ’¥’´’°’µ’∂ ’®’∂’©’°÷Å’´’Ø ÷Ö÷Ä’æ’° ÷á ’®’∂’©’°÷Å’´’Ø ÷Ö’£’ø’°’ø’´÷Ä’∏’ª ’£’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä’®
            const dailyTransactions = log.filter(tx => {
                const txDate = new Date(tx.timestamp).toISOString().split('T')[0];
                return txDate === today && tx.user === userEmail;
            }).reverse(); // ‘±’¥’•’∂’°’æ’•÷Ä’ª’´’∂’®’ù ’Ω’Ø’¶’¢’∏÷Ç’¥
            
            const listElement = document.getElementById('dailyTransactionsList');
            listElement.innerHTML = '';
            
            if (dailyTransactions.length === 0) {
                 listElement.innerHTML = '<li style="padding: 15px; color: #dc3545; font-weight: 500;">‚ùå ‘∏’∂’©’°÷Å’´’Ø ÷Ö÷Ä’® ‘¥’∏÷Ç÷Ñ ’£’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä ’π’•÷Ñ ’Ø’°’ø’°÷Ä’•’¨÷â</li>';
            } else {
                dailyTransactions.forEach(tx => {
                    let amountDisplay = '';
                    let typeText = '';
                    let statusColor = '';
                    
                    // ’à÷Ä’∏’∑’•’¨ ’£’∏÷Ç’¥’°÷Ä’´ ’∂’∑’°’∂’® ÷á ’£’∏÷Ç’µ’∂’®
                    switch (tx.type) {
                        case 'INVESTMENT':
                            amountDisplay = `($ ${tx.amount.toFixed(2)})`;
                            typeText = `üí∞ ’Ü’•÷Ä’§÷Ä’∏÷Ç’¥ (${tx.amount.toFixed(2)}$)`;
                            statusColor = 'negative';
                            break;
                        case 'PROFIT_ADDED':
                        case 'REFERRAL_BONUS':
                            amountDisplay = `+ $ ${tx.amount.toFixed(2)}`;
                            typeText = `‚ú® ‘µ’Ø’°’¥’∏÷Ç’ø (${tx.source || '’Ü’•÷Ä’§÷Ä’∏÷Ç’¥'})`;
                            statusColor = 'positive';
                            break;
                        case 'DAILY_BONUS':
                            amountDisplay = `+ $ ${tx.amount.toFixed(2)}`;
                            typeText = `üéÅ ’ï÷Ä’°’Ø’°’∂ ‘≤’∏’∂’∏÷Ç’Ω`;
                            statusColor = 'positive';
                            break;
                        case 'PROMO_REDEEM':
                            amountDisplay = `+ $ ${tx.amount.toFixed(2)}`;
                            typeText = `üéâ ’ä÷Ä’∏’¥’∏ ‘ø’∏’§`;
                            statusColor = 'positive';
                            break;
                        case 'WITHDRAWAL':
                            amountDisplay = `($ ${tx.amount.toFixed(2)})`;
                            typeText = `üí∏ ‘¥’∏÷Ç÷Ä’Ω’¢’•÷Ä’∏÷Ç’¥`;
                            statusColor = 'negative';
                            break;
                        case 'DEPOSIT':
                            amountDisplay = `? $ ${tx.amount.toFixed(2)}`;
                            typeText = `üìà ‘º’´÷Å÷Ñ’°’æ’∏÷Ä’¥’°’∂ ’Ä’°÷Ä÷Å’∏÷Ç’¥`;
                            statusColor = 'primary';
                            break;
                        default:
                            amountDisplay = `? $ 0.00`;
                            typeText = `‘±’µ’¨ ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ`;
                            statusColor = 'gray';
                    }
                    
                    const time = new Date(tx.timestamp).toLocaleTimeString('hy-AM', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                    
                    const li = document.createElement('li');
                    li.className = 'transaction-item';
                    li.innerHTML = `
                        <div>
                            <span class="tx-type">${typeText}</span>
                            <small style="display: block; color: #9c27b0; font-weight: 500;">${tx.status || '’Ä’°’ª’∏’≤’æ’°’Æ'}</small>
                        </div>
                        <div style="text-align: right;">
                            <span class="tx-amount ${statusColor}">${amountDisplay}</span>
                            <small style="display: block; color: #6c757d;">${time}</small>
                        </div>
                    `;
                    listElement.appendChild(li);
                });
            }
            
            showSection('transactions-history');
        }


        // ‘ø’ê‘ª’ä’è’à ’Ä‘±’ç’ë‘µ’Ü‘µ’ê‘ª ’ë‘±’Ü‘ø‘∏
        const cryptoAddresses = {
            'USDT_TRC20': { display: 'USDT (TRC20)', address: 'TRX7k6f8pTJVY5i3qB3k5gW9vX2sD1eZ' },
            'USDT_ERC20': { display: 'USDT (ERC20)', address: '0x1A2b3c4D5e6F7g8H9i0J1k2L3m4N5o6P7q8R9s0T' },
            'BTC': { display: 'Bitcoin (BTC)', address: 'bc1qzyxwvutsrponmlkjihgfedcba9876543210' },
            'ETH_ERC20': { display: 'Ethereum (ERC20)', address: '0x35E8A9b6B09F6d5cE7B2A9E5F4dC3B0a8E7F6d5C' },
            'LTC': { display: 'Litecoin (LTC)', address: 'ltc1qyzxwvutsrponmlkjihgfedcba9876543210' },
            'DOGE': { display: 'Dogecoin (DOGE)', address: 'DH5J3F7gH8jK9lM4nO1pQ6rS2tU8vW3xY0zB1c' },
            'BNB_BSC': { display: 'BNB (BSC/BEP20)', address: '0x6C7d8e9F0G1h2I3j4K5l6M7n8O9p0Q1r2S3t4U5v' },
            'ADA': { display: 'Cardano (ADA)', address: 'addr1qyrt6g2a4g8h9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z' },
            'XRP': { display: 'Ripple (XRP)', address: 'rPEPper7kfTD9w2To4CQk6UCzCQkCCjDSx' },
            'SOL': { display: 'Solana (SOL)', address: 'SoL4nAFB8i7K6mJ5nO4pQ3rS2tU1vW0xY9zB8c7D6e' }
        };

        // ’ñ’∏÷Ç’∂’Ø÷Å’´’°’ù ’Ω’•÷Ä’æ’•÷Ä’´ (localStorage-’´) ’ø’æ’µ’°’¨’∂’•÷Ä’® ’Ω’ø’°’∂’°’¨’∏÷Ç ’∞’°’¥’°÷Ä
        function getUsersDB() {
            const db = localStorage.getItem('users_db');
            return db ? JSON.parse(db) : {};
        }

        // ’ñ’∏÷Ç’∂’Ø÷Å’´’°’ù ’Ω’•÷Ä’æ’•÷Ä’´ (localStorage-’´) ’ø’æ’µ’°’¨’∂’•÷Ä’® ’∫’°’∞’•’¨’∏÷Ç ’∞’°’¥’°÷Ä
        function saveUsersDB(db) {
            localStorage.setItem('users_db', JSON.stringify(db));
        }

        // ‘ø’∏’§’´ ’£’•’∂’•÷Ä’°÷Å’´’°
        function generateUniqueCode() {
            return 'SOLAR' + Math.floor(10000 + Math.random() * 90000);
        }
        
        // ’ä’ê’à’Ñ’à ‘ø’à‘¥‘µ’ê‘ª ‘≥‘µ’Ü‘µ’ê‘±’ë‘ª‘±’Ö‘ª ’ñ’à’í’Ü‘ø’ë‘ª‘± (’ç‘ø‘∂‘≤’Ü‘±‘ø‘±’Ü ‘≤‘µ’å’Ü’à’í’Ñ)
        function generatePromoCodes() {
            let codes = {};
            const count = 150;
            
            for (let i = 0; i < count; i++) {
                const prefix = 'SOLARBONUS';
                const randomNum = Math.floor(100 + Math.random() * 900); // 100-999
                const code = prefix + randomNum + i; 
                
                // ‘≥’∏÷Ç’¥’°÷Ä’® 0.50$ - 1.00$ ’¥’´’ª’°’Ø’°’µ÷Ñ’∏÷Ç’¥
                const amount = (0.50 + Math.random() * 0.50).toFixed(2);
                
                codes[code] = {
                    amount: parseFloat(amount),
                    used: false // ‘ø’°÷Ä’£’°’æ’´’≥’°’Ø’®
                };
            }
            return codes;
        }

        // ’ï’ê‘±‘ø‘±’Ü ‘µ‘ø‘±’Ñ’è‘ª ’Ä‘±’á’é‘±’ê‘ø’Ñ‘±’Ü ‘≥‘º‘Ω‘±’é’à’ê ’ñ’à’í’Ü‘ø’ë‘ª‘± (’Ü‘µ’ê‘±’å’à’í’Ñ ‘∑ ’å‘µ’ñ‘µ’ê‘±‘º‘ª ‘≤’à’Ü’à’í’ç‘∏)
        function calculateDailyProfit() {
            if (!userEmail) return 0;

            const db = getUsersDB();
            const user = db[userEmail];
            let totalProfitAdded = 0;

            if (!user) {
                return 0; 
            }
            
            // ----------------------------------------------------
            // 1. ’ç’è’à’í‘≥‘µ‘º ‘µ’é ‘±’é‘µ‘º‘±’ë’Ü‘µ‘º ‘±’Ü’Å’Ü‘±‘ø‘±’Ü ’Ü‘µ’ê‘¥’ê’à’í’Ñ’Ü‘µ’ê‘ª ‘µ‘ø‘±’Ñ’à’í’è‘∏
            // ----------------------------------------------------
            let hasNewPersonalProfit = false;
            
            if (user.activeInvestments && user.activeInvestments.length > 0) {
                const now = new Date().getTime();
                
                user.activeInvestments = user.activeInvestments.map(inv => {
                    const lastTime = new Date(inv.lastProfitTime).getTime();
                    const timeDiff = now - lastTime;
                    
                    const cyclesPassed = Math.floor(timeDiff / MS_PER_DAY); 

                    if (cyclesPassed > 0) {
                        const profit = cyclesPassed * inv.dailyProfit;
                        totalProfitAdded += profit;
                        
                        inv.lastProfitTime = new Date(lastTime + cyclesPassed * MS_PER_DAY).toISOString();
                        inv.cyclesCounted = (inv.cyclesCounted || 0) + cyclesPassed;
                        hasNewPersonalProfit = true;
                        
                         // ‘≥÷Ä’°’∂÷Å’•’¨ ’•’Ø’°’¥’∏÷Ç’ø’´ ’£’∏÷Ä’Æ’°÷Ä÷Ñ’® ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ÷Å’´’Ø’¨’´ ’∞’°’¥’°÷Ä
                         for(let i=0; i < cyclesPassed; i++) {
                             addTransactionToLog({
                                transactionId: 'PRFT' + Date.now() + Math.random(), 
                                type: 'PROFIT_ADDED', 
                                user: userEmail, 
                                amount: inv.dailyProfit,
                                source: `(${inv.amount}$ ’Ü’•÷Ä’§÷Ä’∏÷Ç’¥)`,
                                timestamp: new Date(lastTime + (i+1) * MS_PER_DAY).toISOString()
                            });
                         }
                    }
                    return inv;
                });
            }

            // ----------------------------------------------------
            // 2. ’ç’è’à’í‘≥‘µ‘º ‘µ’é ‘±’é‘µ‘º‘±’ë’Ü‘µ‘º ’å‘µ’ñ‘µ’ê‘±‘º‘ª’ë ‘µ‘ø‘±’Ñ’à’í’è‘∏ (10% ’ï’ê‘±‘ø‘±’Ü)
            // ----------------------------------------------------
            let totalReferralProfit = 0;
            let hasNewReferralProfit = false;
            const now = new Date().getTime();
            const todayDate = new Date().toISOString().split('T')[0];
            
            // ’ç’ø’∏÷Ç’£’∏÷Ç’¥ ’•’∂÷Ñ, ’©’• ’∏’æ÷Ñ’•÷Ä ’•’∂ ’¥’•÷Ä ’º’•÷Ü’•÷Ä’°’¨’∂’•÷Ä’®
            for (const email in db) {
                const referredUser = db[email];
                if (referredUser.refUsed === user.refCode) {
                    
                    if (referredUser.activeInvestments && referredUser.activeInvestments.length > 0) {
                        
                        const lastRefPayoutTime = referredUser.lastReferralDailyPayoutTime || '1970-01-01'; 
                        
                        if (lastRefPayoutTime !== todayDate) {
                            
                            let referredDailyTotal = referredUser.activeInvestments.reduce((sum, inv) => sum + inv.dailyProfit, 0);
                            const referralProfit = referredDailyTotal * REFERRAL_BONUS_PERCENTAGE; 

                            if (referralProfit > 0) {
                                totalReferralProfit += referralProfit;
                                hasNewReferralProfit = true;
                                
                                referredUser.lastReferralDailyPayoutTime = todayDate;
                                db[email] = referredUser; 
                                
                                // ‘≥÷Ä’°’∂÷Å’•’¨ ’º’•÷Ü’•÷Ä’°’¨’´ ’¢’∏’∂’∏÷Ç’Ω’®
                                addTransactionToLog({
                                    transactionId: 'REF' + Date.now() + Math.random(), 
                                    type: 'REFERRAL_BONUS', 
                                    user: userEmail, 
                                    amount: referralProfit,
                                    source: `(${referredUser.username} - ${referredUser.activeInvestments.length} ’∂’•÷Ä’§÷Ä’∏÷Ç’¥)`,
                                    timestamp: new Date().toISOString()
                                });
                            }
                        }
                    }
                }
            }
            
            if (hasNewReferralProfit) {
                totalProfitAdded += totalReferralProfit;
                user.refBonus += totalReferralProfit;
                user.balance += totalReferralProfit; 
                currentBalance = user.balance;
                
                const refProfitDisplay = `(+${totalReferralProfit.toFixed(2)}$ ’å’•÷Ü’•÷Ä’°’¨’´ ‘≤’∏’∂’∏÷Ç’Ω)`;
                let profitText = document.getElementById('profit-info').textContent;
                
                if (profitText.includes('‚úÖ ’Å’•÷Ä ’•’Ø’°’¥’∏÷Ç’ø’® ’°’æ’•’¨’°÷Å’æ’•’¨ ’ß:')) {
                    profitText = `‚úÖ ‘±’æ’•’¨’°÷Å’æ’•’¨ ’ß ${totalProfitAdded.toFixed(2)}$ ’®’∂’§’∞’°’∂’∏÷Ç÷Ä ’•’Ø’°’¥’∏÷Ç’ø÷â`;
                } else {
                     profitText = profitText.replace(/(\+\$?\s*\d+\.\d{2})/g, '').trim(); 
                     profitText += ` ${refProfitDisplay}`;
                }
                
                document.getElementById('profit-info').textContent = profitText;
                document.getElementById('profit-info').style.display = 'block';
            }


            // ----------------------------------------------------
            // 3. ‘∏’Ü‘¥’Ä‘±’Ü’à’í’ê ‘π‘±’ê’Ñ‘±’ë’à’í’Ñ
            // ----------------------------------------------------
            if (totalProfitAdded > 0) {
                user.balance = currentBalance;
                db[userEmail] = user;
                saveUsersDB(db);

                document.getElementById('current-balance').textContent = `$ ${currentBalance.toFixed(2)}`;
                if (hasNewPersonalProfit && !hasNewReferralProfit) {
                    document.getElementById('profit-info').textContent = `‚úÖ ‘±’æ’•’¨’°÷Å’æ’•’¨ ’ß ${totalProfitAdded.toFixed(2)}$ ’•’Ø’°’¥’∏÷Ç’ø÷â`;
                    document.getElementById('profit-info').style.display = 'block';
                } else if (!hasNewPersonalProfit && hasNewReferralProfit) {
                    document.getElementById('profit-info').textContent = `‚úÖ ‘±’æ’•’¨’°÷Å’æ’•’¨ ’ß ${totalReferralProfit.toFixed(2)}$ ’•’Ø’°’¥’∏÷Ç’ø (’å’•÷Ü’•÷Ä’°’¨’´ ‘≤’∏’∂’∏÷Ç’Ω)÷â`;
                    document.getElementById('profit-info').style.display = 'block';
                } else if (hasNewPersonalProfit && hasNewReferralProfit) {
                     document.getElementById('profit-info').textContent = `‚úÖ ‘±’æ’•’¨’°÷Å’æ’•’¨ ’ß ${totalProfitAdded.toFixed(2)}$ ’®’∂’§’∞’°’∂’∏÷Ç÷Ä ’•’Ø’°’¥’∏÷Ç’ø÷â`;
                     document.getElementById('profit-info').style.display = 'block';
                }
            } else {
                 document.getElementById('profit-info').style.display = 'none';
            }
            
            return totalProfitAdded;
        }
        
        // ’ï’ê‘±‘ø‘±’Ü ‘≤’à’Ü’à’í’ç‘ª ’è’ê‘±’Ñ‘±‘≤‘±’Ü’à’í‘π’Ö’à’í’Ü‘∏
        function getDailyBonus() {
            const db = getUsersDB();
            let user = db[userEmail];
            
            if (!user) {
                alert("’Ñ’∏÷Ç’ø÷Ñ ’£’∏÷Ä’Æ’•÷Ñ’ù ’¢’∏’∂’∏÷Ç’Ω ’Ω’ø’°’∂’°’¨’∏÷Ç ’∞’°’¥’°÷Ä÷â");
                return;
            }

            if (!user.activeInvestments || user.activeInvestments.length === 0) {
                alert("‚ùå ’ï÷Ä’°’Ø’°’∂ ’¢’∏’∂’∏÷Ç’Ω’® ’∞’°’Ω’°’∂’•’¨’´ ’ß ’¥’´’°’µ’∂ ’°’Ø’ø’´’æ ’∂’•÷Ä’§÷Ä’∏÷Ç’¥ ’Ø’°’ø’°÷Ä’°’Æ ÷Ö’£’ø’°’ø’•÷Ä’•÷Ä’´’∂÷â");
                updateDailyBonusButtonStatus(user); 
                return;
            }
            
            const now = new Date();
            const todayDate = now.toISOString().split('T')[0];
            
            if (user.lastDailyBonusTime === todayDate) {
                 alert("‚ùå ‘¥’∏÷Ç÷Ñ ’°÷Ä’§’•’∂ ’Ω’ø’°÷Å’•’¨ ’•÷Ñ ’Å’•÷Ä ÷Ö÷Ä’°’Ø’°’∂ ’¢’∏’∂’∏÷Ç’Ω’® ’°’µ’Ω÷Ö÷Ä÷â ’ì’∏÷Ä’±’•÷Ñ ’æ’°’≤’®÷â");
                 return;
            }

            currentBalance += DAILY_BONUS_AMOUNT;
            user.balance = currentBalance;
            user.lastDailyBonusTime = todayDate;
            
            db[userEmail] = user; 
            saveUsersDB(db);
            
            // ‚úÖ ‘≥÷Ä’°’∂÷Å’•’¨ ’ï÷Ä’°’Ø’°’∂ ‘≤’∏’∂’∏÷Ç’Ω’®
            addTransactionToLog({
                transactionId: 'DBONUS' + Date.now(), 
                type: 'DAILY_BONUS', 
                user: userEmail, 
                amount: DAILY_BONUS_AMOUNT,
                timestamp: new Date().toISOString()
            });

            document.getElementById('current-balance').textContent = `$ ${currentBalance.toFixed(2)}`;
            alert(`‚úÖ ’á’∂’∏÷Ä’∞’°’æ’∏÷Ä’∏÷Ç’¥ ’•’∂÷Ñ, ‘¥’∏÷Ç÷Ñ ’Ω’ø’°÷Å’°÷Ñ $${DAILY_BONUS_AMOUNT.toFixed(2)} ÷Ö÷Ä’°’Ø’°’∂ ’¢’∏’∂’∏÷Ç’Ω÷â`);
            
            updateDailyBonusButtonStatus(user);
        }

        // ’ï’ê‘±‘ø‘±’Ü ‘≤’à’Ü’à’í’ç‘ª ‘ø’à’É‘±‘ø‘ª ‘ø‘±’ê‘≥‘±’é‘ª’É‘±‘ø‘ª ‘π‘±’ê’Ñ‘±’ë’à’í’Ñ 
        function updateDailyBonusButtonStatus(user) {
            const button = document.getElementById('daily-bonus-button');
            if (!button || !user) return;
            
            const now = new Date();
            const todayDate = now.toISOString().split('T')[0];

            if (user.activeInvestments && user.activeInvestments.length > 0) {
                 if (user.lastDailyBonusTime === todayDate) {
                    button.textContent = `‚úÖ ’ï÷Ä’°’Ø’°’∂ ‘≤’∏’∂’∏÷Ç’Ω’® ’Ω’ø’°÷Å’æ’°’Æ ’ß ’°’µ’Ω÷Ö÷Ä`;
                    button.style.backgroundColor = '#90A4AE'; // ’Ñ’∏’≠÷Ä’°’£’∏÷Ç’µ’∂
                    button.disabled = true;
                 } else {
                    button.textContent = `üéÅ ’ç’ø’°’∂’°’¨ ’ï÷Ä’°’Ø’°’∂ ‘≤’∏’∂’∏÷Ç’Ω’® ($ ${DAILY_BONUS_AMOUNT.toFixed(2)})`;
                    button.style.backgroundColor = 'var(--reward-color)'; 
                    button.disabled = false;
                 }
            } else {
                button.textContent = `‚ùå ‘≤’∏’∂’∏÷Ç’Ω’® ’∞’°’Ω’°’∂’•’¨’´ ’π’ß (’ä’°’∞’°’∂’ª’æ’∏÷Ç’¥ ’ß ’Ü’•÷Ä’§÷Ä’∏÷Ç’¥)`;
                button.style.backgroundColor = 'var(--danger-color)';
                button.disabled = true;
            }
        }


        // ’ñ’∏÷Ç’∂’Ø÷Å’´’°, ’∏÷Ä’® ’¢’•’º’∂’∏÷Ç’¥ ’ß ÷Ö’£’ø’°’ø’´÷Ä’∏’ª ’ø’æ’µ’°’¨’∂’•÷Ä’® localStorage-’´÷Å
        function loadUserFromStorage() {
            const storedEmail = localStorage.getItem('activeUserEmail');
            if (storedEmail) {
                const db = getUsersDB();
                const user = db[storedEmail];
                
                if (user) {
                    userEmail = storedEmail;
                    currentBalance = user.balance;

                    // ‘±’æ’ø’∏’¥’°’ø ’°’∂÷Å’∏÷Ç’¥ dashboard
                    showSection('dashboard');
                    return true;
                }
            }
            return false;
        }
        
        // ’å‘µ’ñ‘µ’ê‘±‘º‘ª ’è’é’Ö‘±‘º’Ü‘µ’ê‘ª ‘π‘±’ê’Ñ‘±’ë’Ñ‘±’Ü ’ñ’à’í’Ü‘ø’ë‘ª‘±
        function updateReferralData(currentRefCode) {
             const db = getUsersDB();
             let registeredCount = 0; // ‘≥÷Ä’°’∂÷Å’æ’°’Æ’∂’•÷Ä’´ ÷Ñ’°’∂’°’Ø
             let bonusTotal = 0.00; // ’ç’ø’°÷Å’æ’°’Æ ’¢’∏’∂’∏÷Ç’Ω’´ ’£’∏÷Ç’¥’°÷Ä (’∂’•÷Ä’°’º’µ’°’¨ 10%-’®)

             const currentUser = db[userEmail];
             if (currentUser) {
                 bonusTotal = currentUser.refBonus || 0.00;
             }

             for (const email in db) {
                 const otherUser = db[email];
                 // ’ç’ø’∏÷Ç’£’∏÷Ç’¥ ’•’∂÷Ñ, ’©’• ’∏’æ÷Ñ’•÷Ä ’•’∂ ’£÷Ä’°’∂÷Å’æ’•’¨ ’°’µ’Ω ’Ø’∏’§’∏’æ
                 if (otherUser.refUsed === currentRefCode) {
                     registeredCount += 1; 
                 }
             }

             document.getElementById('referralCodeDisplay').textContent = currentRefCode;
             document.getElementById('refCount').textContent = registeredCount; // ‘π’°÷Ä’¥’°÷Å’∂’•’¨ ÷Ñ’°’∂’°’Ø’®
             document.getElementById('refBonus').textContent = `$ ${bonusTotal.toFixed(2)}`;
             
             // ’ä’°’∞’∫’°’∂’•’¨ registeredCount-’® user ÷Ö’¢’µ’•’Ø’ø’∏÷Ç’¥
             if (currentUser) {
                 currentUser.registeredReferralsCount = registeredCount;
                 db[userEmail] = currentUser;
                 saveUsersDB(db);
             }
        }


        // ‘≤’°’™’´’∂’∂’•÷Ä’® ÷Å’∏÷Ç÷Å’°’§÷Ä’•’¨’∏÷Ç ÷Ü’∏÷Ç’∂’Ø÷Å’´’°
        function showSection(sectionId) {
            const mainContainer = document.getElementById('main-container');
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            const targetSection = document.getElementById(sectionId + '-section');
            if (targetSection) {
                targetSection.style.display = 'block';
                
                if (userEmail && (sectionId === 'dashboard' || sectionId === 'investments')) {
                    calculateDailyProfit(); // ‘ø’°’∂’π’•’¨ ’•’Ø’°’¥’∏÷Ç’ø’´ ’∞’°’∑’æ’°÷Ä’Ø’®
                }

                document.getElementById('current-balance').textContent = `$ ${currentBalance.toFixed(2)}`;
                
                // ‘ø’°÷Ä’£’°’æ’∏÷Ä’•’¨ ’§’´’ø’°÷Ä’Ø’´’π’´ ’π’°÷É’®
                const largeSections = ['investments', 'referral', 'account', 'transactions-history'];
                if (largeSections.includes(sectionId)) {
                    mainContainer.style.maxWidth = '1000px'; 
                    mainContainer.style.padding = '50px';
                } else {
                    mainContainer.style.maxWidth = '500px'; 
                    mainContainer.style.padding = '40px';
                }
                
                // ‘≤’°’¨’°’∂’Ω’´ ’©’°÷Ä’¥’°÷Å’∏÷Ç’¥
                ['invest', 'account', 'rewards'].forEach(suffix => {
                    const el = document.getElementById(`current-balance-${suffix}`);
                    if (el) el.textContent = currentBalance.toFixed(2);
                });

                // ’è’°÷Ä’¢’•÷Ä ’¢’°’™’´’∂’∂’•÷Ä’´ ’Ø’∏’∂’Ø÷Ä’•’ø ’£’∏÷Ä’Æ’∏’≤’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä
                if (sectionId === 'dashboard') {
                    const db = getUsersDB();
                    const user = db[userEmail];
                    if (user) updateDailyBonusButtonStatus(user); 
                }

                if (sectionId === 'investments') {
                    updateActiveInvestmentsList();
                }
                
                if (userEmail && (sectionId === 'dashboard' || sectionId === 'referral')) {
                    const db = getUsersDB();
                    const user = db[userEmail];
                    if (user) {
                        updateReferralData(user.refCode);
                    }
                }

                if (sectionId === 'account') {
                    const adminControlsDiv = document.getElementById('admin-section-controls');
                    if (userEmail === ADMIN_EMAIL) {
                        adminControlsDiv.style.display = 'block';
                        loadAllUsersForAdmin();
                        
                        pendingTransaction = getPendingTransaction(); 
                        if (pendingTransaction) {
                            showAdminLog(pendingTransaction);
                        } else {
                            document.getElementById('adminLog').textContent = `’ç’∫’°’Ω’∏÷Ç’¥ ’ß ’£’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä’´:`;
                            document.getElementById('adminControls').style.display = 'none';
                        }
                    } else {
                        adminControlsDiv.style.display = 'none';
                    }
                }
                
                if (sectionId === 'deposit-details' && pendingTransaction) {
                    document.getElementById('deposit-status-display').textContent = pendingTransaction.status;
                    
                    const transferButton = document.getElementById('transfer-sent-button');
                    if (pendingTransaction.status.includes('Admin Confirmation')) {
                        transferButton.style.display = 'none';
                    } else {
                        transferButton.style.display = 'block';
                    }
                }
            }
        }

        // ‘¥’∏÷Ç÷Ä’Ω ’£’°’¨’∏÷Ç ÷Ü’∏÷Ç’∂’Ø÷Å’´’° 
        function logOut() {
            localStorage.removeItem('activeUserEmail');
            userEmail = '';
            currentBalance = 0.00;
            alert('‘¥’∏÷Ç÷Ä’Ω ’•’Ø’°÷Ñ ’∞’°’∑’æ’´÷Å:');
            showSection('login');
        }

        // ‚úÖ ‘ø‘±’ä‘ª ’ñ’à’í’Ü‘ø’ë‘ª‘±’Ü
        function contactManager() {
            const telegramUsername = 'Solar165'; 
            window.open(`https://t.me/${telegramUsername}`, '_blank');
        }


        // ‘≥÷Ä’°’∂÷Å’¥’°’∂ ’±÷á’´ ’¥’∑’°’Ø’∏÷Ç’¥
        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            event.preventDefault(); 
            const password = document.getElementById('reg-password').value;
            const confirmPassword = document.getElementById('reg-confirmPassword').value;
            const regEmail = document.getElementById('reg-email').value;
            const refCodeUsed = document.getElementById('reg-referralCode').value;
            const username = document.getElementById('reg-username').value;
            const db = getUsersDB();

            if (password !== confirmPassword) {
                alert("‘≥’°’≤’ø’∂’°’¢’°’º’•÷Ä’® ’π’•’∂ ’∞’°’¥’®’∂’Ø’∂’∏÷Ç’¥:");
                return;
            }

            if (db[regEmail]) {
                 alert("‘±’µ’Ω ’ß’¨. ÷É’∏’Ω’ø’´ ’∞’°’Ω÷Å’•’∂ ’°÷Ä’§’•’∂ ’£÷Ä’°’∂÷Å’æ’°’Æ ’ß:");
                 return;
            }
            
            const uniqueRefCode = generateUniqueCode();
            
            const initialBalance = REGISTRATION_BONUS_AMOUNT; 

            db[regEmail] = {
                username: username,
                password: password, 
                balance: initialBalance, 
                refCode: uniqueRefCode,
                refUsed: refCodeUsed || null, 
                refBonus: 0.00,
                activeInvestments: [],
                lastDailyBonusTime: null, 
                registeredReferralsCount: 0,
                lastReferralDailyPayoutTime: null, 
            };
            saveUsersDB(db);
            
            // ‚úÖ ‘≥÷Ä’°’∂÷Å’•’¨ ‘≥÷Ä’°’∂÷Å’¥’°’∂ ‘≤’∏’∂’∏÷Ç’Ω’®
            addTransactionToLog({
                transactionId: 'REGBONUS' + Date.now(), 
                type: 'REGISTRATION_BONUS', 
                user: regEmail, 
                amount: initialBalance,
                timestamp: new Date().toISOString()
            });

            alert(`‘≥÷Ä’°’∂÷Å’∏÷Ç’¥’® ’∞’°’ª’∏’≤ ’ß÷â ‘¥’∏÷Ç÷Ñ ’Ω’ø’°÷Å’°÷Ñ $${initialBalance.toFixed(2)} ’¢’∏’∂’∏÷Ç’Ω÷â ‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’¥’∏÷Ç’ø÷Ñ ’£’∏÷Ä’Æ’•’¨÷â`);
            showSection('login'); 
        });

        // ’Ñ’∏÷Ç’ø÷Ñ’´ ’±÷á’´ ’¥’∑’°’Ø’∏÷Ç’¥
        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const logEmail = document.getElementById('log-email').value;
            const logPassword = document.getElementById('log-password').value;
            const db = getUsersDB();

            const user = db[logEmail];
            
            if (user && user.password === logPassword) {
                localStorage.setItem('activeUserEmail', logEmail); 

                userEmail = logEmail;
                currentBalance = user.balance;

                document.getElementById('current-balance').textContent = `$ ${currentBalance.toFixed(2)}`;
                alert(`‘≤’°÷Ä’´ ’£’°’¨’∏÷Ç’Ω’ø, ${user.username}÷â ’Ñ’∏÷Ç’ø÷Ñ’® ’∞’°’ª’∏’≤ ’ß÷â`);
                showSection('dashboard'); 
                
                updateDailyBonusButtonStatus(user);
            } else {
                alert("’ç’≠’°’¨ ‘∑’¨. ’ì’∏’Ω’ø ’Ø’°’¥ ‘≥’°’≤’ø’∂’°’¢’°’º÷â");
            }
        });

        // ’ä’ê’à’Ñ’à ‘ø’à‘¥‘ª ’Ñ’á‘±‘ø’Ñ‘±’Ü ’ñ’à’í’Ü‘ø’ë‘ª‘±
        document.getElementById('promoCodeForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const codeInput = document.getElementById('promo-code-input');
            const code = codeInput.value.trim().toUpperCase();
            
            promoCodes = getPromoCodesDB(); 

            if (!code) { alert("’Ñ’∏÷Ç’ø÷Ñ’°’£÷Ä’•÷Ñ ’∫÷Ä’∏’¥’∏ ’Ø’∏’§’®÷â"); return; }

            const promoData = promoCodes[code];

            if (!promoData) { alert("’ç’≠’°’¨ ’∫÷Ä’∏’¥’∏ ’Ø’∏’§ ’Ø’°’¥ ’Ø’∏’§’® ’£’∏’µ’∏÷Ç’©’µ’∏÷Ç’∂ ’π’∏÷Ç’∂’´÷â"); return; }
            if (promoData.used) { alert(`’ä÷Ä’∏’¥’∏ ’Ø’∏’§’®’ù ${code}-’® ’°÷Ä’§’•’∂ ÷Ö’£’ø’°’£’∏÷Ä’Æ’æ’°’Æ ’ß÷â`); return; }

            const bonusAmount = promoData.amount;
            
            const db = getUsersDB();
            let user = db[userEmail];
            
            if (user) {
                currentBalance += bonusAmount;
                user.balance = currentBalance;
                
                promoData.used = true;
                promoCodes[code] = promoData;
                
                db[userEmail] = user; 
                saveUsersDB(db);
                savePromoCodesDB(promoCodes);
                
                // ‚úÖ ‘≥÷Ä’°’∂÷Å’•’¨ ’ä÷Ä’∏’¥’∏ ‘ø’∏’§’´ ’ï’£’ø’°’£’∏÷Ä’Æ’∏÷Ç’¥’®
                addTransactionToLog({
                    transactionId: 'PROMO' + Date.now(), 
                    type: 'PROMO_REDEEM', 
                    user: userEmail, 
                    amount: bonusAmount,
                    code: code,
                    timestamp: new Date().toISOString()
                });

                document.getElementById('current-balance').textContent = `$ ${currentBalance.toFixed(2)}`;
                document.getElementById('current-balance-rewards').textContent = currentBalance.toFixed(2);
                codeInput.value = ''; 
                
                alert(`üéâ ’á’∂’∏÷Ä’∞’°’æ’∏÷Ä’∏÷Ç’¥ ’•’∂÷Ñ÷â ‘¥’∏÷Ç÷Ñ ’Ω’ø’°÷Å’°÷Ñ $${bonusAmount.toFixed(2)} ’¢’∏’∂’∏÷Ç’Ω÷â`);
            }
        });


        // ’Ü‘µ’ê‘¥’ê’à’í’Ñ’Ü‘µ’ê‘ª ‘ø‘±’å‘±’é‘±’ê’à’í’Ñ
        function handleInvestment(amount, dailyProfit) {
            if (currentBalance < amount) {
                alert(`’Ü’•÷Ä’§÷Ä’¥’°’∂ ’∞’°’¥’°÷Ä ’£’∏÷Ç’¥’°÷Ä’® ’¢’°’æ’°÷Ä’°÷Ä ’π’ß÷â ‘±’∂’∞÷Ä’°’™’•’∑’ø ’ß $${amount}, ’Å’•÷Ä ’¥’∂’°÷Å’∏÷Ä’§’® $${currentBalance.toFixed(2)} ’ß÷â`);
                return;
            }

            currentBalance -= amount;
            
            const db = getUsersDB();
            let user = db[userEmail];
            
            if (user) {
                const wasInactive = (user.activeInvestments.length === 0); 

                const newInvestment = {
                    id: Date.now(),
                    amount: amount,
                    dailyProfit: dailyProfit,
                    lastProfitTime: new Date().toISOString(), 
                    cyclesCounted: 0 
                };
                user.activeInvestments.push(newInvestment);

                user.balance = currentBalance;
                
                db[userEmail] = user; 
                saveUsersDB(db);
                
                // ‚úÖ ‘≥÷Ä’°’∂÷Å’•’¨ ’Ü’•÷Ä’§÷Ä’∏÷Ç’¥’®
                addTransactionToLog({
                    transactionId: 'INV' + newInvestment.id, 
                    type: 'INVESTMENT', 
                    user: userEmail, 
                    amount: amount,
                    profit: dailyProfit,
                    timestamp: new Date().toISOString()
                });
                
                document.getElementById('current-balance').textContent = `$ ${currentBalance.toFixed(2)}`;
                alert(`’Ü’•÷Ä’§÷Ä’∏÷Ç’¥’® $${amount} ’∞’°’ª’∏’≤’∏÷Ç’©’µ’°’¥’¢ ’Ø’°’ø’°÷Ä’æ’•÷Å÷â ’Ñ’∂’°÷Å’∏÷Ä’§’®: $${currentBalance.toFixed(2)}`);

                if (wasInactive) {
                    updateDailyBonusButtonStatus(user); 
                }
                
                updateActiveInvestmentsList(); 
                showSection('investments'); 
            }
        }
        
        // ‘±’Ø’ø’´’æ ’Ü’•÷Ä’§÷Ä’∏÷Ç’¥’∂’•÷Ä’´ ’ë’∏÷Ç÷Å’°’Ø’´ ‘π’°÷Ä’¥’°÷Å’∏÷Ç’¥
        function updateActiveInvestmentsList() {
            const db = getUsersDB();
            const user = db[userEmail];
            const listElement = document.getElementById('activeInvestmentsList');
            listElement.innerHTML = ''; 

            if (!user || user.activeInvestments.length === 0) {
                 listElement.innerHTML = '<li style="color: #6c757d;">‘¥’∏÷Ç÷Ñ ’§’•’º ’°’Ø’ø’´’æ ’∂’•÷Ä’§÷Ä’∏÷Ç’¥ ’π’∏÷Ç’∂’•÷Ñ:</li>';
                 return;
            }
            
            user.activeInvestments.forEach(inv => {
                const li = document.createElement('li');
                li.style.cssText = 'padding: 10px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between;';
                
                const startDate = new Date(inv.lastProfitTime).toLocaleDateString('hy-AM', { year: 'numeric', month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit' });

                li.innerHTML = `
                    <span>
                        **’Ü’•÷Ä’§÷Ä’∏÷Ç’¥:** $${inv.amount.toFixed(2)} | 
                        **’ï÷Ä’°’Ø’°’∂:** $${inv.dailyProfit.toFixed(2)} | 
                        **’ç’Ø’´’¶’¢:** ${startDate}
                    </span>
                    <span style="color: var(--secondary-color); font-weight: 600;">
                        ’ç’ø’°÷Å’æ’•’¨ ’ß: ${inv.cyclesCounted} ÷Ö÷Ä’æ’° ’•’Ø’°’¥’∏÷Ç’ø
                    </span>
                `;
                listElement.appendChild(li);
            });
        }


        // ‘º’´÷Å÷Ñ’°’æ’∏÷Ä’¥’°’∂ ’±÷á’´ ’¥’∑’°’Ø’∏÷Ç’¥
        document.getElementById('depositForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const amount = parseFloat(document.getElementById('deposit-amount').value);
            const networkKey = document.getElementById('crypto-network').value;
            const networkInfo = cryptoAddresses[networkKey];
            
            if (amount < 20) { alert("‘º’´÷Å÷Ñ’°’æ’∏÷Ä’¥’°’∂ ’∂’æ’°’¶’°’£’∏÷Ç’µ’∂ ’£’∏÷Ç’¥’°÷Ä’® $20 ’ß:"); return; }

            const depositRequest = {
                transactionId: 'TRX' + Date.now(), 
                type: 'DEPOSIT', 
                user: userEmail, 
                amount: amount.toFixed(2),
                currency: networkInfo.display, 
                address_to_send: networkInfo.address, 
                status: '’ç’∫’°’Ω’∏÷Ç’¥ ’ß ’Å’•÷Ä ’ì’∏’≠’°’∂÷Å’¥’°’∂’®', 
                timestamp: new Date().toISOString()
            };

            pendingTransaction = depositRequest;
            savePendingTransaction(depositRequest); 
            
            // ‚úÖ ‘≥÷Ä’°’∂÷Å’•’¨ ‘º’´÷Å÷Ñ’°’æ’∏÷Ä’¥’°’∂ ’Ä’°÷Ä÷Å’∏÷Ç’¥’®
            addTransactionToLog(depositRequest);
            
            // ‘π’°÷Ä’¥’°÷Å’∂’•’¨ ‘º’´÷Å÷Ñ’°’æ’∏÷Ä’¥’°’∂ ‘¥’•’ø’°’¨’∂’•÷Ä’´ ‘≤’°’™’´’∂’®
            document.getElementById('deposit-amount-display').textContent = `$ ${amount.toFixed(2)}`;
            document.getElementById('deposit-currency-display').textContent = networkInfo.display;
            document.getElementById('deposit-address-display').textContent = networkInfo.address;
            document.getElementById('deposit-status-display').textContent = depositRequest.status;
            
            showSection('deposit-details');
        });

        // ’è‘µ’Ç‘µ‘ø‘±’ë’Ü‘µ‘º, ’à’ê ’ì’à‘Ω‘±’Ü’ë’à’í’Ñ‘∏ ‘ø‘±’è‘±’ê’é‘±‘æ ‘∑
        function notifyTransferSent() {
            if (!pendingTransaction || pendingTransaction.type !== 'DEPOSIT') {
                alert("’ç’≠’°’¨÷â ’â’Ø’° ’°’Ø’ø’´’æ ’¨’´÷Å÷Ñ’°’æ’∏÷Ä’¥’°’∂ ’∞’°÷Ä÷Å’∏÷Ç’¥÷â");
                return;
            }
            
            pendingTransaction.status = 'Pending Admin Confirmation';
            savePendingTransaction(pendingTransaction); 

            document.getElementById('deposit-status-display').textContent = pendingTransaction.status;
            document.getElementById('transfer-sent-button').style.display = 'none'; 
            
            // ‚úÖ ‘π’°÷Ä’¥’°÷Å’∂’•’¨ ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’´ ’ä’°’ø’¥’∏÷Ç’©’µ’∏÷Ç’∂’®
            const log = getTransactionLog();
            const index = log.findIndex(tx => tx.transactionId === pendingTransaction.transactionId);
            if (index !== -1) {
                log[index].status = '’ì’∏’≠’°’∂÷Å’∏÷Ç’¥’∂ ’à÷Ç’≤’°÷Ä’Ø’æ’°’Æ ‘∑';
                saveTransactionLog(log);
            }
            
            alert(`‚úÖ ’è’•’≤’•’Ø’°÷Å’∏÷Ç’¥’® ’∞’°’ª’∏’≤’∏÷Ç’©’µ’°’¥’¢ ’∏÷Ç’≤’°÷Ä’Ø’æ’•÷Å÷â ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’® ’Ω’∫’°’Ω’∏÷Ç’¥ ’ß ‘±’§’¥’´’∂’´ ’∞’°’Ω’ø’°’ø’¥’°’∂’®÷â`);
            
            if (userEmail === ADMIN_EMAIL) {
                 showAdminLog(pendingTransaction);
            }
            
            showSection('dashboard');
        }

        // ’Ä’°’Ω÷Å’•’∂ ’∫’°’ø’≥’•’∂’•’¨’∏÷Ç ÷Ü’∏÷Ç’∂’Ø÷Å’´’°
        function copyDepositAddress() {
             const address = document.getElementById('deposit-address-display').textContent;
             navigator.clipboard.writeText(address).then(() => {
                alert('’Ä’°’Ω÷Å’•’∂ ’∫’°’ø’≥’•’∂’æ’•÷Å: ' + address);
            }, (err) => {
                console.error('’â’Ø’°÷Ä’∏’≤’°÷Å’° ’∫’°’ø’≥’•’∂’•’¨ ’∞’°’Ω÷Å’•’∂: ', err);
                alert('‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’±’•’º÷Ñ’∏’æ ’∫’°’ø’≥’•’∂’•’¨ ’∞’°’Ω÷Å’•’∂÷â');
            });
        }

        // ‘¥’∏÷Ç÷Ä’Ω’¢’•÷Ä’¥’°’∂ ’±÷á’´ ’¥’∑’°’Ø’∏÷Ç’¥
        document.getElementById('withdrawForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const amount = parseFloat(document.getElementById('withdraw-amount').value);
            const address = document.getElementById('withdraw-address').value;
            const password = document.getElementById('withdraw-password').value;
            const db = getUsersDB();
            const user = db[userEmail];
            
            if (user.password !== password) { alert("’ç’≠’°’¨ ’£’°’≤’ø’∂’°’¢’°’º÷â"); return; }
            if (amount < 15) { alert("‘¥’∏÷Ç÷Ä’Ω’¢’•÷Ä’¥’°’∂ ’∂’æ’°’¶’°’£’∏÷Ç’µ’∂ ’£’∏÷Ç’¥’°÷Ä’® $15 ’ß:"); return; }
            if (amount > currentBalance) { alert("’Ñ’∂’°÷Å’∏÷Ä’§’® ’¢’°’æ’°÷Ä’°÷Ä ’π’ß ’§’∏÷Ç÷Ä’Ω’¢’•÷Ä’¥’°’∂ ’∞’°’¥’°÷Ä:"); return; }

            const withdrawRequest = {
                transactionId: 'TRX' + Date.now(), type: 'WITHDRAWAL', user: userEmail, amount: amount,
                address_to_send: address, status: 'Pending Admin Confirmation', timestamp: new Date().toISOString()
            };

            pendingTransaction = withdrawRequest;
            savePendingTransaction(withdrawRequest); 
            
            currentBalance -= amount;
            user.balance = currentBalance;
            db[userEmail] = user;
            saveUsersDB(db);
            
            // ‚úÖ ‘≥÷Ä’°’∂÷Å’•’¨ ‘¥’∏÷Ç÷Ä’Ω’¢’•÷Ä’¥’°’∂ ’Ä’°÷Ä÷Å’∏÷Ç’¥’®
            addTransactionToLog(withdrawRequest);

            document.getElementById('current-balance').textContent = `$ ${currentBalance.toFixed(2)}`;
            
            if (userEmail === ADMIN_EMAIL) {
                showAdminLog(withdrawRequest);
            } else {
                 alert(`‘¥’∏÷Ç÷Ä’Ω’¢’•÷Ä’¥’°’∂ ’∞’°÷Ä÷Å’∏÷Ç’¥’∂ ’®’∂’§’∏÷Ç’∂’æ’°’Æ ’ß÷â ${amount}$ ‘≥’∏÷Ç’¥’°÷Ä’® ’∂’æ’°’¶’•÷Å’æ’•÷Å ’Å’•÷Ä ’¥’∂’°÷Å’∏÷Ä’§’´÷Å ÷á ’Ω’∫’°’Ω’∏÷Ç’¥ ’ß ‘±’§’¥’´’∂’´ ’∞’°’Ω’ø’°’ø’¥’°’∂’®÷â`);
                 showSection('dashboard');
            }
        });

        // ‘º’ê‘±’ë’à’í’ë‘ª’â ‘±’Ü’é’è‘±’Ü‘≥’à’í‘π’Ö‘±’Ñ‘≤ ’Ä‘±’ç’è‘±’è’Ñ‘±’Ü ‘≥’à’ê‘æ‘±’ê‘ø’à’í’Ñ
        function promptAdminConfirmation(isConfirmed) {
            const adminPasswordInput = document.getElementById('admin-password').value;
            const adminTXID = document.getElementById('admin-txid').value;
            
            const db = getUsersDB();
            const adminUser = db[ADMIN_EMAIL];

            if (!pendingTransaction) {
                 alert("’â’Ø’° ’Ω’∫’°’Ω’æ’∏’≤ ’£’∏÷Ä’Æ’°÷Ä÷Ñ÷â");
                 return;
            }
            
            if (adminUser && adminUser.password !== adminPasswordInput) {
                alert("’ç’≠’°’¨ ‘±’§’¥’´’∂’´ ‘≥’°’≤’ø’∂’°’¢’°’º÷â ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’® ’π’´ ’∞’°’Ω’ø’°’ø’æ’•’¨÷â");
                return;
            }

            if (isConfirmed && pendingTransaction.type === 'DEPOSIT' && adminTXID.length < 5) {
                alert("‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’¥’∏÷Ç’ø÷Ñ’°’£÷Ä’•’¨ ’Ø÷Ä’´’∫’ø’∏ ’£’∏÷Ä’Æ’°÷Ä÷Ñ’´ ’Ä‘±’ç’è‘±’è’Ñ‘±’Ü ID-’∂ (TXID)÷â");
                return;
            }
            
            confirmTransaction(isConfirmed, adminTXID);
        }
        
        // ‘±‘¥’Ñ‘ª’Ü‘ª ’Ä‘±’ç’è‘±’è’Ñ‘±’Ü ‘≥‘º‘Ω‘±’é’à’ê ’ñ’à’í’Ü‘ø’ë‘ª‘±
        function confirmTransaction(isConfirmed, txid = 'N/A') {
            const trans = pendingTransaction;
            const db = getUsersDB();
            let targetUser = db[trans.user];

            if (!targetUser) { 
                alert("’ç’≠’°’¨÷â ‘π’´÷Ä’°’≠’°’µ’´’∂ ÷Ö’£’ø’°’ø’•÷Ä’® ’£’ø’∂’æ’°’Æ ’π’ß÷â");
                pendingTransaction = null; 
                savePendingTransaction(null);
                showSection('dashboard');
                return;
            }

            // ‘≥’ø’∂’•’¨ ’£’∏÷Ä’Æ’°÷Ä÷Ñ’® ’¨’∏’£’∏÷Ç’¥
            const log = getTransactionLog();
            const index = log.findIndex(tx => tx.transactionId === trans.transactionId);

            if (isConfirmed) {
                if (trans.type === 'DEPOSIT') {
                    targetUser.balance = (targetUser.balance || 0) + parseFloat(trans.amount);
                    alert(`‘º’´÷Å÷Ñ’°’æ’∏÷Ä’∏÷Ç’¥’® ${trans.amount}$ ’Ä‘±’ç’è‘±’è’é‘±‘æ ‘∑÷â ‘≥’∏÷Ç’¥’°÷Ä’® ’°’æ’•’¨’°÷Å’æ’•÷Å ${trans.user} ’∞’°’∑’æ’´’∂÷â`);
                    trans.status = 'Confirmed (TXID: ' + txid + ')';
                    
                } else if (trans.type === 'WITHDRAWAL') {
                    alert(`‘¥’∏÷Ç÷Ä’Ω’¢’•÷Ä’∏÷Ç’¥’® ${trans.amount}$ ’Ä‘±’ç’è‘±’è’é‘±‘æ ‘∑÷â ‘≥’∏÷Ç’¥’°÷Ä’® ’∏÷Ç’≤’°÷Ä’Ø’æ’•÷Å ${trans.address_to_send} ’∞’°’Ω÷Å’•’´’∂÷â`);
                    trans.status = 'Confirmed (Sent)';
                }
            } else {
                if (trans.type === 'DEPOSIT') {
                    // ’à’π’´’∂’π ’π’´ ÷É’∏’≠’æ’∏÷Ç’¥
                } else if (trans.type === 'WITHDRAWAL') {
                    targetUser.balance = (targetUser.balance || 0) + parseFloat(trans.amount);
                    alert(`‘¥’∏÷Ç÷Ä’Ω’¢’•÷Ä’∏÷Ç’¥’® ${trans.amount}$ ’Ñ‘µ’ê‘∫’é‘±‘æ ‘∑÷â ‘≥’∏÷Ç’¥’°÷Ä’® ’æ’•÷Ä’°’§’°÷Ä’±’æ’•÷Å ${trans.user} ’∞’°’∑’æ’´’∂÷â`);
                }
                trans.status = 'Rejected (Admin)';
            }
            
            trans.confirmationTime = new Date().toISOString();

            // ‚úÖ ‘π’°÷Ä’¥’°÷Å’∂’•’¨ ‘≥’∏÷Ä’Æ’°÷Ä÷Ñ’´ ‘ø’°÷Ä’£’°’æ’´’≥’°’Ø’® ’ä’°’ø’¥’∏÷Ç’©’µ’°’∂ ‘º’∏’£’∏÷Ç’¥
            if (index !== -1) {
                log[index].status = trans.status;
                log[index].confirmationTime = trans.confirmationTime;
                saveTransactionLog(log);
            }

            pendingTransaction = null; 
            savePendingTransaction(null); 
            
            document.getElementById('adminLog').textContent = `’ç’∫’°’Ω’∏÷Ç’¥ ’ß ’£’∏÷Ä’Æ’°÷Ä÷Ñ’∂’•÷Ä’´:`; 
            document.getElementById('adminControls').style.display = 'none';
            document.getElementById('admin-txid').value = ''; 
            document.getElementById('admin-password').value = '';

            db[trans.user] = targetUser;
            saveUsersDB(db);

            if (userEmail === ADMIN_EMAIL) {
                showSection('account');
            } else {
                currentBalance = targetUser.balance;
                showSection('dashboard'); 
            }
        }

        function showAdminLog(transaction) {
            document.getElementById('adminLog').textContent = JSON.stringify(transaction, null, 2);
            document.getElementById('adminControls').style.display = 'block';
            document.getElementById('admin-txid').value = ''; 
            document.getElementById('admin-password').value = '';
        }
        
        // ‘≤’à‘º’à’ê ’ï‘≥’è‘±’è‘µ’ê‘µ’ê‘ª ’ë’à’í’ë‘±‘ø‘ª ’ë’à’í’ë‘±‘¥’ê’à’í’Ñ
        function loadAllUsersForAdmin() {
            const db = getUsersDB();
            const listElement = document.getElementById('admin-user-list');
            
            let htmlContent = '<style>#admin-user-list table { width: 100%; border-collapse: collapse; margin-top: 15px; } #admin-user-list th, #admin-user-list td { border: 1px solid #dee2e6; padding: 8px; text-align: left; } #admin-user-list th { background-color: var(--primary-color); color: white; } #admin-user-list tr:nth-child(even) { background-color: #f8f9fa; } .balance-cell { color: #28a745; font-weight: bold; }</style><table>';
            htmlContent += '<thead><tr><th>‘±’∂’∏÷Ç’∂/Email</th><th>’Ñ’∂’°÷Å’∏÷Ä’§</th><th>’å’•÷Ü. ‘ø’∏’§</th><th>’Ü’•÷Ä’§÷Ä’∏÷Ç’¥’∂’•÷Ä</th></tr></thead>';
            htmlContent += '<tbody>';
            
            let totalBalance = 0;
            
            for (const email in db) {
                const user = db[email];
                totalBalance += user.balance;
                
                const refCount = user.registeredReferralsCount || 0; 
                
                htmlContent += `
                    <tr>
                        <td><strong>${user.username}</strong><br><small>${email}</small></td>
                        <td class="balance-cell">$ ${user.balance.toFixed(2)}</td>
                        <td>${user.refCode}</td>
                        <td style="text-align: center;">${user.activeInvestments.length}</td>
                    </tr>
                `;
            }

            htmlContent += '</tbody></table>';

            htmlContent += `<p style="margin-top: 20px; font-weight: 600; font-size: 1.1em; color: var(--primary-color);">
                ‘∏’∂’§’∞’°’∂’∏÷Ç÷Ä ’Ñ’∂’°÷Å’∏÷Ä’§ (‘≤’∏’¨’∏÷Ä ’ï’£’ø’°’ø’•÷Ä’•÷Ä’´): $ ${totalBalance.toFixed(2)}
            </p>`;
            
            listElement.innerHTML = htmlContent;
        }

        function copyReferralCode() {
            const code = document.getElementById('referralCodeDisplay').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('’Ä÷Ä’°’æ’•÷Ä’´ ’Ø’∏’§’® ’∫’°’ø’≥’•’∂’æ’•÷Å: ' + code);
            }, (err) => {
                console.error('’â’Ø’°÷Ä’∏’≤’°÷Å’° ’∫’°’ø’≥’•’∂’•’¨ ’∞’°’Ω÷Å’•’∂: ', err);
                alert('‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’±’•’º÷Ñ’∏’æ ’∫’°’ø’≥’•’∂’•’¨ ’Ø’∏’§’®÷â');
            });
        }

        // JSON ÷Ü’°’µ’¨’® ’Ø’°÷Ä’§’°’¨’∏÷Ç ÷á localStorage-’´ ’∞’•’ø ’¥’´’°÷Å’∂’•’¨’∏÷Ç ’∞’°’¥’°÷Ä
        async function loadInitialData() {
            try {
                let localDB = getUsersDB();
                
                if (Object.keys(localDB).length === 0) {
                    const initialDB = {
                        "admin@solar.com": {
                            username: "Admin", password: "admin", balance: 10000.00, refCode: "ADMIN001", refUsed: null, refBonus: 0.00, activeInvestments: [], lastDailyBonusTime: null, registeredReferralsCount: 0, lastReferralDailyPayoutTime: null
                        },
                        "testuser@example.com": {
                             username: "Test User", password: "123", balance: 51.00, refCode: "SOLAR95103", refUsed: "ADMIN001", refBonus: 0.00, activeInvestments: [{ id: 1678886400000, amount: 20, dailyProfit: 1.1, lastProfitTime: new Date(Date.now() - 3 * MS_PER_DAY).toISOString(), cyclesCounted: 3 }], lastDailyBonusTime: null, registeredReferralsCount: 0, lastReferralDailyPayoutTime: null
                        }
                    };
                    saveUsersDB(initialDB);
                    console.log("‚úÖ ’ç’Ø’¶’¢’∂’°’Ø’°’∂ ’ï’£’ø’°’ø’•÷Ä’•÷Ä’® ’¢’•’º’∂’æ’•÷Å’´’∂ localStorage-’∏÷Ç’¥÷â");
                } else {
                    let updated = false;
                    for (let email in localDB) {
                        if (localDB[email].lastDailyBonusTime === undefined) {
                            localDB[email].lastDailyBonusTime = null;
                            updated = true;
                        }
                        if (localDB[email].lastReferralDailyPayoutTime === undefined) {
                             localDB[email].lastReferralDailyPayoutTime = null;
                             updated = true;
                        }
                        if (localDB[email].isBonusGiven !== undefined) {
                             delete localDB[email].isBonusGiven; 
                             updated = true;
                        }
                    }
                    if (updated) saveUsersDB(localDB);
                } 

                // 2. ’ç’ø’∏÷Ç’£’•’¨ ’ä÷Ä’∏’¥’∏ ‘ø’∏’§’•÷Ä’´ ‘≤’°’¶’°’∂
                promoCodes = getPromoCodesDB();
                if (Object.keys(promoCodes).length === 0) {
                    promoCodes = generatePromoCodes();
                    savePromoCodesDB(promoCodes);
                    console.log(`‚úÖ ${Object.keys(promoCodes).length} ’ä÷Ä’∏’¥’∏ ‘ø’∏’§’•÷Ä ’∞’°’ª’∏’≤’∏÷Ç’©’µ’°’¥’¢ ’£’•’∂’•÷Ä’°÷Å’æ’•÷Å’´’∂ ÷á ’∫’°’∞’∫’°’∂’æ’•÷Å’´’∂÷â`);
                }
                
            } catch (error) {
                console.warn("‚ö†Ô∏è ’è’æ’µ’°’¨’∂’•÷Ä’´ ’¢’•’º’∂’¥’°’∂ ’Ω’≠’°’¨:", error.message);
            }
        }

        // ‘∑’ª’´ ’¢’•’º’∂’¥’°’∂ ’ø÷Ä’°’¥’°’¢’°’∂’∏÷Ç’©’µ’∏÷Ç’∂
        window.onload = async function() {
            await loadInitialData();
            
            if (!loadUserFromStorage()) {
                 showSection('login');
            }
        }
    </script>
</body>
</html>
